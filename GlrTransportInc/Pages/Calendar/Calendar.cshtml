@page
@model CalendarModel
@{
    ViewBag.Title = "Calendar";
}
<!-- syntax of grabbing freight bill data from the model
    CalendarModel.BillName[0]
    CalendarModel.StartDate[0]
    CalendarModel.DueDate[0]
    CalendarModel.Status[0]
-->
<br />
<div class="row">

    <div class="col-md-12">
        <div id="calendar"></div>
    </div>

</div>

<!--Needs to be update to new Full Calendar-->
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.1/fullcalendar.min.css" rel="stylesheet" />
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.1/fullcalendar.print.css" rel="stylesheet" media="print" />

@section scripts{
    <!--Needs tob e changed for new Full Calendar-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.1/fullcalendar.min.js"></script>

    <script>
        $(document).ready(function () {
            var Id = '@Html.Raw(Json.Serialize(CalendarModel.Id))';
            var Id2 = JSON.parse(Id);
            var BillName = '@Html.Raw(Json.Serialize(CalendarModel.BillName))';
            var BillName2 = JSON.parse(BillName);
            var StartDate = '@Html.Raw(Json.Serialize(CalendarModel.StartDate))';
            var StartDate2 = JSON.parse(StartDate);
            var DueDate = '@Html.Raw(Json.Serialize(CalendarModel.DueDate))';
            var DueDate2 = JSON.parse(DueDate);
            var Status = '@Html.Raw(Json.Serialize(CalendarModel.Status))';
            var Status2 = JSON.parse(Status);
            //var StatusColor;
            //var data = JSON.parse(model);
            var tempevents = [];
            //var events = [];

            for (i = 0; i < BillName2.length; i++) {
                var temp = new Object();
                temp["id"] = Id2[i];
                temp["title"] = BillName2[i];
                temp["start"] = StartDate2[i];
                temp["end"] = DueDate2[i];
                temp["status"] = Status2[i];
                //IF statements for different colors
                if (Status2[i] == 0) {
                    //Status Pending Color
                    temp["color"] = "#00bff";
                }
                else if (Status2[i] == 1) {
                    //Status Shipped Color
                    temp["color"] = "Orange";
                }
                else if (Status2[i] == 2) { 
                    //Status Complete Color
                    temp["color"] = "#378006";
                }
                else {
                    //Status Canceled or Error Color
                    temp["color"] = "Red";
                }
                tempevents.push(temp);
            }
            $("#calendar").fullCalendar('removeEventSource', tempevents); 
            GenerateCalendar(tempevents);
            

            function GenerateCalendar(events) { 
                $("#calendar").fullCalendar('removeEventSource', events);
                $('#calendar').fullCalendar({
                    contentHeight: 700,
                    defaultDate: new Date(),
                    timeFormat: 'h(:mm)a',
                    header: {
                        left: 'month,listWeek,listDay',
                        center: 'title',
                        right: 'prev,next today'
                    },
                    footer: {
                        left: 'prev',
                        right: 'next'
                    },
                    defaultView: 'listDay',
                    eventLimit: true,
                    eventColor: '#378006',
                    events: events
                });
            }
        });
    </script>

}
